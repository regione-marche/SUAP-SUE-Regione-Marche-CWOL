<?php

include_once ITA_BASE_PATH . '/apps/Accessi/accLib.class.php';

class accLibFedera {

    private $accLib;
    private $errCode;
    private $errMessage;
    private $envParamKey = 'SSOFEDERA';

    public function __construct() {
        $this->accLib = new accLib();
    }

    public function getErrCode() {
        return $this->errCode;
    }

    public function getErrMessage() {
        return $this->errMessage;
    }

    protected function getEnvParam($key, $codiceEnte = 'ditta') {
        include_once ITA_BASE_PATH . '/apps/Sviluppo/devLib.class.php';
        $devLib = new devLib();
        $devLib->setITALWEB(ItaDB::DBOpen('ITALWEB', $codiceEnte));
        $envConfig_rec = $devLib->getEnv_config($this->envParamKey, 'codice', $key, false);
        return $envConfig_rec['CONFIG'];
    }

    public function getLoginURI($codiceEnte) {
        $backUrl = dirname((isset($_SERVER['HTTPS']) ? 'https' : 'http') . "://{$_SERVER['HTTP_HOST']}{$_SERVER['REQUEST_URI']}") .
            "/StartRedirect.php?tmpToken=" . App::$tmpToken . "&ditta=$codiceEnte&federaLogin=1";

        return $backUrl;
    }

    public function login($codiceEnte) {
        $simplesamlphp = $this->getEnvParam('SIMPLESAMLPHP', $codiceEnte);
        $entity_id = $this->getEnvParam('SERVICE_PROVIDER', $codiceEnte);

        include_once $simplesamlphp . DIRECTORY_SEPARATOR . 'lib' . DIRECTORY_SEPARATOR . '_autoload.php';

        $as = new SimpleSAML_Auth_Simple($entity_id);
        $as->requireAuth();
        $attributes = $as->getAttributes();
        $codiceFiscale = $attributes['CodiceFiscale'][0];

        $result = $this->accLib->getTokenFromCF($codiceFiscale, $codiceEnte, true);
        if ($result['status'] != 0) {
            $this->errCode = -1;
            $this->errMessage = $result['messaggio'];
            return false;
        }

        return $result['token'];
    }

    public function getButtonHtml($nameform) {
        $onClick = 'onclick="itaGo(\'ItaForm\', this, { event: \'onClick\', model: \'' . $nameform . '\', id: \'' . $nameform . '_Federa\' });"';

        $loginHtml = <<<LOGIN
<a href="#" $onClick style="padding: 2px 0; text-decoration: none; font-weight: 600; margin: 0 auto; background-color: #f36d2a; color: #fff; display: inline-block;">
    <img style="height: 30px; vertical-align: middle; margin: 0 .4em 0 1em;" src="data:image/png;base64,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">
    <span style="vertical-align: middle; display: inline-block; border-left: 1px solid rgba( 255, 255, 255, .15 ); padding: .55em 1em; font-size: 1.5em; font-family: 'Titillium Web',HelveticaNeue,Helvetica Neue,Helvetica,Arial,Lucida Grande,sans-serif;">Accedi con Federa</span>
</a>
LOGIN;

        return $loginHtml;
    }

}
